"use strict";(globalThis.webpackChunkaws_ps_tech_docs=globalThis.webpackChunkaws_ps_tech_docs||[]).push([[4438],{3860(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"omics-on-aws/hail-with-amazon-emr-notebook","title":"Hail with Amazon EMR notebook","description":"\ub178\ud2b8\ubd81 \uc14b\uc5c5","source":"@site/docs/omics-on-aws/hail-with-amazon-emr-notebook.md","sourceDirName":"omics-on-aws","slug":"/omics-on-aws/hail-with-amazon-emr-notebook","permalink":"/docusaurus/en/omics-on-aws/hail-with-amazon-emr-notebook","draft":false,"unlisted":false,"editUrl":"https://github.com/aws-wwps-kr-tech/docusaurus/tree/main/docs/omics-on-aws/hail-with-amazon-emr-notebook.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Hail with Amazon EMR notebook","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"AWS Glue","permalink":"/docusaurus/en/omics-on-aws/aws-glue"},"next":{"title":"Quickstart Hail (Korean)","permalink":"/docusaurus/en/omics-on-aws/quickstart-hail-korean"}}');var a=s(4848),t=s(8453);const r={title:"Hail with Amazon EMR notebook",sidebar_position:2},i=void 0,l={},h=[{value:"\ub178\ud2b8\ubd81 \uc14b\uc5c5",id:"\ub178\ud2b8\ubd81-\uc14b\uc5c5",level:3},{value:"EMR \ub178\ud2b8\ubd81\uc5d0 Hail \uc124\uce58",id:"emr-\ub178\ud2b8\ubd81\uc5d0-hail-\uc124\uce58",level:3},{value:"<strong>\ucc38\uace0\ubb38\uc11c</strong>",id:"\ucc38\uace0\ubb38\uc11c",level:3},{value:"<strong>EMR on EC2\ub85c Hail \uc96c\ud53c\ud130\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud55c EMR \ub178\ud2b8\ubd81 \ud658\uacbd \uad6c\uc131</strong>",id:"emr-on-ec2\ub85c-hail-\uc96c\ud53c\ud130\ub97c-\uc0ac\uc6a9\ud558\uae30-\uc704\ud55c-emr-\ub178\ud2b8\ubd81-\ud658\uacbd-\uad6c\uc131",level:2}];function c(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h3,{id:"\ub178\ud2b8\ubd81-\uc14b\uc5c5",children:"\ub178\ud2b8\ubd81 \uc14b\uc5c5"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"EMR \uc2a4\ud29c\ub514\uc624\uc5d0\uc11c \ub3d9\uc77c\ud55c VPC\uc5d0 \uc0c8 \uc2a4\ud29c\ub514\uc624\ub97c \ub9cc\ub4ed\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.li,{children:"\uc0dd\uc131\ud55c \uc2a4\ud29c\ub514\uc624\uc5d0 \ub300\ud55c \uc0c8 \uc791\uc5c5 \uacf5\uac04(\ub178\ud2b8\ubd81)\uc744 \uc0dd\uc131\ud558\uba74 \uc644\ub8cc\ub418\uba74 jupyterHub\uc5d0 \ub300\ud55c \uc0c8 \ud0ed\uc774 \uc790\ub3d9\uc73c\ub85c \uc5f4\ub9bd\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.li,{children:"python3 \ucee4\ub110\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0c8 \ub178\ud2b8\ubd81\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4.\\"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"emr-\ub178\ud2b8\ubd81\uc5d0-hail-\uc124\uce58",children:"EMR \ub178\ud2b8\ubd81\uc5d0 Hail \uc124\uce58"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"pip install hail\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\ucd94\ud6c4 S3a \ud504\ub85c\ud1a0\ucf5c \uc0ac\uc6a9\uc744 \uc704\ud55c \ub0b4\uc6a9"}),"\xa0 (",(0,a.jsx)(n.a,{href:"https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html",children:"Hadoop-AWS module"}),")"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Ssh into primary node (",(0,a.jsx)(n.strong,{children:"as sudo user"}),")\\"]}),"\n",(0,a.jsxs)(n.li,{children:["Go to the jars directory: ",(0,a.jsx)(n.code,{children:"cd /home/emr-notebook/.local/lib/python3.9/site-packages/pyspark/jars"}),"\\"]}),"\n",(0,a.jsxs)(n.li,{children:["Download the 2 jar files with the following command in the directory:","\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["sudo curl -sSL ",(0,a.jsx)(n.a,{href:"https://search.maven.org/remotecontent?filepath=org/apache/hadoop/hadoop-aws/3.3.2/hadoop-aws-3.3.2.jar",children:"https://search.maven.org/remotecontent?filepath=org/apache/hadoop/hadoop-aws/3.3.2/hadoop-aws-3.3.2.jar"})," > ./hadoop-aws-3.3.2.jar"]}),"\n",(0,a.jsxs)(n.li,{children:["sudo curl -sSL ",(0,a.jsx)(n.a,{href:"https://search.maven.org/remotecontent?filepath=com/amazonaws/aws-java-sdk-bundle/1.12.99/aws-java-sdk-bundle-1.12.99.jar",children:"https://search.maven.org/remotecontent?filepath=com/amazonaws/aws-java-sdk-bundle/1.12.99/aws-java-sdk-bundle-1.12.99.jar"})," > ./aws-java-sdk-bundle-1.12.99.jar\\"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\uc758\uc874\uc131 \uc124\uce58"}),"\n",(0,a.jsxs)(n.p,{children:["[There are 2 jars missing in the java class path the notebook is using. Using python shell directly from the cluster does not need to do this (but only need to point ]",(0,a.jsx)(n.code,{children:"SPARK_HOME"}),"[ to the jars because the required dependencies are already there if run from hadoop environment) as Notebook hosts a different environment for all dependencies installed. Also, the hadoop version (uses aws version of hadoop) and package is slightly different from what we get in the hadoop environment in ]",(0,a.jsx)(n.code,{children:"SPARK_HOME;"}),"[ Notebook environment uses the external hadoop client, meaning that it will not be able to connect to S3. ]",(0,a.jsx)(n.br,{}),"\n","[We need to download aws sdk jar and hadoop aws jar and put them into Notebook's environment jar collection. ]\\"]}),"\n",(0,a.jsx)(n.p,{children:"[Primary \ub178\ub4dc\uc758 \uc778\uc2a4\ud134\uc2a4 EC2 Monitoring]"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"\uc774\ubbf8\uc9c0",src:s(8217).A+"",width:"2190",height:"1260"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Core \ub178\ub4dc\uc758 \uc778\uc2a4\ud134\uc2a4 EC2 Monitoring"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"\uc774\ubbf8\uc9c0",src:s(4121).A+"",width:"1964",height:"858"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\uc608\uc81c \ub178\ud2b8\ubd81 \ub2e4\uc6b4\ub85c\ub4dc"}),"\\"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.aws-ps-tech.kr/attachments/1",children:"hail-tutorial.zip"})}),"\n",(0,a.jsx)(n.h3,{id:"\ucc38\uace0\ubb38\uc11c",children:(0,a.jsx)(n.strong,{children:"\ucc38\uace0\ubb38\uc11c"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{}),"\n",(0,a.jsx)(n.li,{}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.h2,{id:"emr-on-ec2\ub85c-hail-\uc96c\ud53c\ud130\ub97c-\uc0ac\uc6a9\ud558\uae30-\uc704\ud55c-emr-\ub178\ud2b8\ubd81-\ud658\uacbd-\uad6c\uc131",children:(0,a.jsx)(n.strong,{children:"EMR on EC2\ub85c Hail \uc96c\ud53c\ud130\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud55c EMR \ub178\ud2b8\ubd81 \ud658\uacbd \uad6c\uc131"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"EMR Serverless \ub85c Hail \uc791\uc5c5\uc81c\ucd9c\ud558\uae30"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://catalog.us-east-1.prod.workshops.aws/workshops/f9855d43-62e3-441b-ba02-7f37a278c077/en-US/5-emr-serverless",children:"https://catalog.us-east-1.prod.workshops.aws/workshops/f9855d43-62e3-441b-ba02-7f37a278c077/en-US/5-emr-serverless"})}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},4121(e,n,s){s.d(n,{A:()=>o});const o=s.p+"assets/images/screenshot-2024-05-21-at-4-35-31-pm-cf79ffc176632f42b25a5e6b3680a7cc.png"},8217(e,n,s){s.d(n,{A:()=>o});const o=s.p+"assets/images/screenshot-2024-05-21-at-4-34-18-pm-5b26b2df2fc462e93edef8b405e0bc08.png"},8453(e,n,s){s.d(n,{R:()=>r,x:()=>i});var o=s(6540);const a={},t=o.createContext(a);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);