"use strict";(globalThis.webpackChunkaws_ps_tech_docs=globalThis.webpackChunkaws_ps_tech_docs||[]).push([[4926],{2419(e,s,n){n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"omics-on-aws/nf-core-scrnaseq","title":"Nf-core \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30 (scrnaseq)","description":"\ucc38\uace0\ubb38\uc11c//catalog.us-east-1.prod.workshops.aws/workshops/76d4a4ff-fe6f-436a-a1c2-f7ce44bc5d17/en-US","source":"@site/docs/omics-on-aws/nf-core-scrnaseq.md","sourceDirName":"omics-on-aws","slug":"/omics-on-aws/nf-core-scrnaseq","permalink":"/docusaurus/omics-on-aws/nf-core-scrnaseq","draft":false,"unlisted":false,"editUrl":"https://github.com/aws-wwps-kr-tech/docusaurus/tree/main/docs/omics-on-aws/nf-core-scrnaseq.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Nf-core \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30 (scrnaseq)","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"AWS HealthOmics \uc18c\uac1c \ubc0f \uc8fc\uc694 \ub9c1\ud06c","permalink":"/docusaurus/omics-on-aws/aws-healthomics"},"next":{"title":"Nf-core \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30 (rnaseq)","permalink":"/docusaurus/omics-on-aws/nf-core-rnaseq"}}');var r=n(4848),c=n(8453);const i={title:"Nf-core \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30 (scrnaseq)",sidebar_position:1},a=void 0,t={},l=[{value:"\ud504\ub85c\uc81d\ud2b8 \uc14b\uc5c5",id:"\ud504\ub85c\uc81d\ud2b8-\uc14b\uc5c5",level:2},{value:"nf-core repository\ub85c\ubd80\ud130 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ubcf5\uc81c",id:"nf-core-repository\ub85c\ubd80\ud130-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\ubcf5\uc81c",level:4},{value:"Docker Image Manifest\uc758 \uc0dd\uc131",id:"docker-image-manifest\uc758-\uc0dd\uc131",level:4},{value:"\ucee8\ud14c\uc774\ub108 \uc0ac\uc124\ud654 (into Amazon ECR)",id:"\ucee8\ud14c\uc774\ub108-\uc0ac\uc124\ud654-into-amazon-ecr",level:4},{value:"nf-core project \ucf54\ub4dc \uc5c5\ub370\uc774\ud2b8",id:"nf-core-project-\ucf54\ub4dc-\uc5c5\ub370\uc774\ud2b8",level:4},{value:"AWS HealthOmics \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub9cc\ub4e4\uae30",id:"aws-healthomics-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\ub9cc\ub4e4\uae30",level:2},{value:"\ub2e8\uacc41. AWS HealthOmics \ud30c\ub77c\ubbf8\ud130 \ud30c\uc77c",id:"\ub2e8\uacc41-aws-healthomics-\ud30c\ub77c\ubbf8\ud130-\ud30c\uc77c",level:4},{value:"\ub2e8\uacc42. \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc2a4\ud14c\uc774\uc9d5",id:"\ub2e8\uacc42-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\uc2a4\ud14c\uc774\uc9d5",level:4},{value:"\ub2e8\uacc43. \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc0dd\uc131 \ud655\uc778",id:"\ub2e8\uacc43-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\uc0dd\uc131-\ud655\uc778",level:4},{value:"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \ud14c\uc2a4\ud2b8\ud558\uae30",id:"\uc6cc\ud06c\ud50c\ub85c\uc6b0-\ud14c\uc2a4\ud2b8\ud558\uae30",level:2},{value:"<strong>\uc791\uc740 \ud06c\uae30\uc758 \uc608\uc81c \uc0d8\ud50c</strong>",id:"\uc791\uc740-\ud06c\uae30\uc758-\uc608\uc81c-\uc0d8\ud50c",level:3},{value:"\uc785\ub825\ud30c\uc77c \uc900\ube44",id:"\uc785\ub825\ud30c\uc77c-\uc900\ube44",level:4},{value:"<strong>\uc2e4\uc81c \ud06c\uae30\uc758 \uc0d8\ud50c</strong>",id:"\uc2e4\uc81c-\ud06c\uae30\uc758-\uc0d8\ud50c",level:3},{value:"Prepare IAM service role to run AWS HealthOmics workflow",id:"prepare-iam-service-role-to-run-aws-healthomics-workflow",level:5},{value:"IAM Role \uc0dd\uc131",id:"iam-role-\uc0dd\uc131",level:4},{value:"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc2e4\ud589",id:"\uc6cc\ud06c\ud50c\ub85c\uc6b0-\uc2e4\ud589",level:4}];function d(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",p:"p",pre:"pre",strong:"strong",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["\ucc38\uace0\ubb38\uc11c: ",(0,r.jsx)(s.a,{href:"https://catalog.us-east-1.prod.workshops.aws/workshops/76d4a4ff-fe6f-436a-a1c2-f7ce44bc5d17/en-US",children:"https://catalog.us-east-1.prod.workshops.aws/workshops/76d4a4ff-fe6f-436a-a1c2-f7ce44bc5d17/en-US"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://catalog.us-east-1.prod.workshops.aws/workshops/76d4a4ff-fe6f-436a-a1c2-f7ce44bc5d17/en-US/introduction/setting-up-environment",children:"\uc774 \ubb38\uc11c\ub97c \ucc38\uace0"}),"\ud558\uc5ec \ud658\uacbd\uc744 \uc900\ube44\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc11c\ub294 \uc774 \uacfc\uc815\uc740 \uc0dd\ub7b5\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(s.p,{children:["2025\ub144 6\uc6d4 6\uc77c\uae30\uc900 scrnaseq v4.0.0 \ub3c4 \uc9c0\uc6d0\ud569\ub2c8\ub2e4.\xa0 (",(0,r.jsx)(s.a,{href:"https://docs.aws.amazon.com/omics/latest/dev/workflow-languages.html#workflow-languages-nextflow",children:"nextflow\uc758 \ud50c\ub7ec\uadf8\uc778\uc778 nf-scheam \uc9c0\uc6d0 \ucc38\uace0"}),")"]}),"\n",(0,r.jsx)(s.p,{children:"\ub2e4\ub9cc \ud604\uc7ac \uc544\ub798 \ub0b4\uc6a9\uc740\xa02.7.1 \uae30\uc900\uc73c\ub85c \uc791\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(s.h2,{id:"\ud504\ub85c\uc81d\ud2b8-\uc14b\uc5c5",children:"\ud504\ub85c\uc81d\ud2b8 \uc14b\uc5c5"}),"\n",(0,r.jsx)(s.p,{children:"\\"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\ubc84\ud0b7 \uc0dd\uc131 \ubc0f Bash \ud658\uacbd\ubcc0\uc218 \uc120\uc5b8"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'cd ~\n\nExport yourbucket="your-bucket-name"\nExport your_account_id="your-account-id"\nExport region="your-region"\nExport workflow_name="your-workflow-name"\nExport omics_role_name="your_omics_rolename"\n\n# if not exist the bucket, let\'s create.\n#aws s3 mb $yourbucket\n'})}),"\n",(0,r.jsx)(s.h4,{id:"nf-core-repository\ub85c\ubd80\ud130-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\ubcf5\uc81c",children:"nf-core repository\ub85c\ubd80\ud130 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ubcf5\uc81c"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"cd ~\ngit clone https://github.com/nf-core/scrnaseq --branch 2.7.1 --single-branch\n"})}),"\n",(0,r.jsx)(s.h4,{id:"docker-image-manifest\uc758-\uc0dd\uc131",children:"Docker Image Manifest\uc758 \uc0dd\uc131"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"cp  ~/amazon-ecr-helper-for-aws-healthomics/lib/lambda/parse-image-uri/public_registry_properties.json namespace.config\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"inspect_nf.py"}),"\xa0\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"python3 amazon-omics-tutorials/utils/scripts/inspect_nf.py \\\n--output-manifest-file scrnaseq_271_docker_images_manifest.json \\\n -n namespace.config \\\n --output-config-file omics.config \\\n --region $region \\\n ~/scrnaseq/\n"})}),"\n",(0,r.jsxs)(s.p,{children:["\uc0dd\uc131\ub418\ub294 \ub450 \uac1c\uc758 \ucd9c\ub825\uc740 ",(0,r.jsx)(s.code,{children:"scrnaseq_271_docker_images_manifest.json"}),"\uacfc ",(0,r.jsx)(s.code,{children:"omics.config"}),"\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"scrnaseq_271_docker_images_manifest.json"})," \ud30c\uc77c\uc740 \uc608\ub97c\ub4e4\uc5b4 \ub2e4\uc74c\uacfc \uac19\uc740 \ubaa8\uc2b5\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4:"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"\uc774\ubbf8\uc9c0",src:n(4626).A+"",width:"1774",height:"796"})}),"\n",(0,r.jsx)(s.h4,{id:"\ucee8\ud14c\uc774\ub108-\uc0ac\uc124\ud654-into-amazon-ecr",children:"\ucee8\ud14c\uc774\ub108 \uc0ac\uc124\ud654 (into Amazon ECR)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"aws stepfunctions start-execution \\\n--state-machine-arn arn:aws:states:$region:$your_account_id:stateMachine:omx-container-puller \\\n--input file://scrnaseq_271_docker_images_manifest.json\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://console.aws.amazon.com/states/home",children:"step function \ucf58\uc194"}),"\uc5d0\uc11c state machines\uc911\uc5d0 ",(0,r.jsx)(s.code,{children:"omx-container-puller"}),"\ub97c \ud655\uc778\ud558\uc5ec Execution\uc774 \uc644\ub8cc\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.\\"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"\uc774\ubbf8\uc9c0",src:n(3912).A+"",width:"2540",height:"800"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"\uc774\ubbf8\uc9c0",src:n(6314).A+"",width:"2044",height:"890"})}),"\n",(0,r.jsx)(s.h4,{id:"nf-core-project-\ucf54\ub4dc-\uc5c5\ub370\uc774\ud2b8",children:"nf-core project \ucf54\ub4dc \uc5c5\ub370\uc774\ud2b8"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"mv omics.config scrnaseq/conf\n"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"echo \"includeConfig 'conf/omics.config'\" >> scrnaseq/nextflow.config \n"})}),"\n",(0,r.jsx)(s.h2,{id:""}),"\n",(0,r.jsx)(s.h2,{id:"aws-healthomics-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\ub9cc\ub4e4\uae30",children:"AWS HealthOmics \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub9cc\ub4e4\uae30"}),"\n",(0,r.jsx)(s.h4,{id:"\ub2e8\uacc41-aws-healthomics-\ud30c\ub77c\ubbf8\ud130-\ud30c\uc77c",children:"\ub2e8\uacc41. AWS HealthOmics \ud30c\ub77c\ubbf8\ud130 \ud30c\uc77c"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"parameter-description.json"}),"\uc744 \ub9cc\ub4e4\uc5b4 \uc544\ub798\uc640 \uac19\uc774 \uc800\uc7a5\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'cat  parameter-description.json\n,\n    "protocol" : ,\n    "aligner": ,\n    "barcode_whitelist": ,\n    "gtf": ,\n    "fasta": ,\n    "skip_emptydrops": \n}\nEOF\n'})}),"\n",(0,r.jsx)(s.h4,{id:"\ub2e8\uacc42-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\uc2a4\ud14c\uc774\uc9d5",children:"\ub2e8\uacc42. \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc2a4\ud14c\uc774\uc9d5"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'zip -r scrnaseq-workflow.zip scrnaseq -x "*/\\.*" "*/\\.*/**"\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\naws s3 cp scrnaseq-workflow.zip s3://$/workshop/scrnaseq-workflow.zip\n\naws omics create-workflow \\\n  --name $ \\\n  --definition-uri s3://$/workshop/scrnaseq-workflow.zip \\\n  --parameter-template file://parameter-description.json \\\n  --engine NEXTFLOW\n"})}),"\n",(0,r.jsx)(s.h4,{id:"\ub2e8\uacc43-\uc6cc\ud06c\ud50c\ub85c\uc6b0-\uc0dd\uc131-\ud655\uc778",children:"\ub2e8\uacc43. \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc0dd\uc131 \ud655\uc778"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"workflow_id=$(aws omics list-workflows --name $ --query 'items[0].id' --output text)\necho $workflow_id\n"})}),"\n",(0,r.jsx)(s.p,{children:"\\"}),"\n",(0,r.jsx)(s.h2,{id:"\uc6cc\ud06c\ud50c\ub85c\uc6b0-\ud14c\uc2a4\ud2b8\ud558\uae30",children:"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \ud14c\uc2a4\ud2b8\ud558\uae30"}),"\n",(0,r.jsx)(s.h3,{id:"\uc791\uc740-\ud06c\uae30\uc758-\uc608\uc81c-\uc0d8\ud50c",children:(0,r.jsx)(s.strong,{children:"\uc791\uc740 \ud06c\uae30\uc758 \uc608\uc81c \uc0d8\ud50c"})}),"\n",(0,r.jsx)(s.h4,{id:"\uc785\ub825\ud30c\uc77c-\uc900\ube44",children:"\uc785\ub825\ud30c\uc77c \uc900\ube44"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"parameter-description.json"}),"\uc5d0 \uc0ac\uc6a9\ub41c \uac83\uacfc \ub3d9\uc77c\ud55c \ud0a4\ub97c \uc0ac\uc6a9\ud558\uc5ec ",(0,r.jsx)(s.code,{children:"input.json"})," \ud30c\uc77c\uc744 \uc0c8\ub85c \ub9cc\ub4ed\ub2c8\ub2e4. \uac12\uc740 \uc6cc\ud06c\ud50c\ub85c\uc5d0\uc11c \ud5c8\uc6a9\ub418\ub294 \uc2e4\uc81c S3 \uacbd\ub85c \ub610\ub294 \ubb38\uc790\uc5f4\uc774 \ub429\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(s.p,{children:["\uc544\ub798\ub294 \ud14c\uc2a4\ud2b8 \uc0d8\ud50c\uc758 \ud30c\ub77c\ubbf8\ud130 \uc608\uc2dc\uc785\ub2c8\ub2e4. (",(0,r.jsx)(s.a,{href:"https://github.com/nf-core/scrnaseq/blob/e0ddddbff9d8b8c2421c67ff07449a06f9ca02d2/conf/test.config#L26",children:"\ucc38\uace0"}),")"]}),"\n",(0,r.jsx)(s.p,{children:"\ub370\uc774\ud130 \uc900\ube44 \ucc38\uace0"}),"\n",(0,r.jsx)(s.p,{children:"\uc608\uc81c \ub370\uc774\ud130\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \ub2e4\uc6b4\ub85c\ub4dc \ud574\ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"wget https://github.com/nf-core/test-datasets/raw/scrnaseq/samplesheet-2-0.csv\nwget https://github.com/nf-core/test-datasets/raw/scrnaseq/reference/GRCm38.p6.genome.chr19.fa\nwget https://github.com/nf-core/test-datasets/raw/scrnaseq/reference/gencode.vM19.annotation.chr19.gtf\n"})}),"\n",(0,r.jsx)(s.p,{children:"\uc774\uc81c \ud604\uc7ac \ub514\ub809\ud1a0\ub9ac\uc5d0 \ub2e4\uc6b4\ub85c\ub4dc \ub41c \ud30c\uc77c\ub4e4\uc744 \ubc84\ud0b7\uc5d0 \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"aws s3 sync . s3://omics-output-us-east-1-462922227709/workflow_migration_workshop/nfcore-scrnaseq-v4.0.0/\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"sample sheet \ub9cc\ub4e4\uae30"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'cat  samplesheet-2-0.csv\nsample,fastq_1,fastq_2,expected_cells,seq_center\nSample_X,s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/Sample_X_S1_L001_R1_001.fastq.gz,s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/Sample_X_S1_L001_R2_001.fastq.gz,5000,"Broad Institute"\nSample_Y,s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/Sample_Y_S1_L001_R1_001.fastq.gz,s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/Sample_Y_S1_L001_R2_001.fastq.gz,5000,"CRG Barcelona"\nSample_Y,s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/Sample_Y_S1_L002_R1_001.fastq.gz,s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/Sample_Y_S1_L002_R2_001.fastq.gz,5000,"CRG Barcelona"\nEOF\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\uc704\uc5d0\uc11c \ub9cc\ub4e0 samplesheet\ub97c s3\ub85c \ubcf5\uc0ac"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"aws s3 cp samplesheet-2-0.csv s3://$/nfcore-scrnaseq/samplesheet-2-0.csv\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\uc785\ub825 json \ub9cc\ub4e4\uae30 (\uc704 sample sheet\uacbd\ub85c\uac00 \uc544\ub798 \ub0b4\uc6a9\uc911 input\uc5d0 \uac12\uc73c\ub85c \ub4e4\uc5b4\uac00\uac8c\ub428)"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'cat  input.json\n/nfcore-scrnaseq/samplesheet-2-0.csv",\n        "protocol": "10XV2",\n        "aligner": "star",\n        "fasta": "s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/GRCm38.p6.genome.chr19.fa",\n        "gtf": "s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/gencode.vM19.annotation.chr19.gtf",\n        "skip_emptydrops": true\n}\nEOF\n'})}),"\n",(0,r.jsx)(s.h3,{id:"\uc2e4\uc81c-\ud06c\uae30\uc758-\uc0d8\ud50c",children:(0,r.jsx)(s.strong,{children:"\uc2e4\uc81c \ud06c\uae30\uc758 \uc0d8\ud50c"})}),"\n",(0,r.jsxs)(s.p,{children:["(\ucd9c\ucc98: ",(0,r.jsx)(s.a,{href:"https://github.com/nf-core/scrnaseq/blob/c5a64459fec1506304f7064639f3f8e12d971269/conf/test_full.config",children:"\ucc38\uace0"}),")"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\ub370\uc774\ud130 \ub0b4 \ubc84\ud0b7\ub0b4\uc5d0 \uc900\ube44"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'aws s3 sync s3://ngi-igenomes/test-data/scrnaseq/ s3://$/test-data/scrnaseq/ --exclude "*" --include "pbmc8k_S1_L00*"\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"sample sheet \ub9cc\ub4e4\uae30"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"cat  samplesheet_2.0_full.csv\nsample,fastq_1,fastq_2,expected_cells\npbmc8k,s3://$/test-data/scrnaseq/pbmc8k_S1_L007_R1_001.fastq.gz,s3://$/test-data/scrnaseq/pbmc8k_S1_L007_R2_001.fastq.gz,10000\npbmc8k,s3://$/test-data/scrnaseq/pbmc8k_S1_L008_R1_001.fastq.gz,s3://$/test-data/scrnaseq/pbmc8k_S1_L008_R2_001.fastq.gz,10000\nEOF\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\uc704\uc5d0\uc11c \ub9cc\ub4e0 samplesheet\ub97c s3\ub85c \ubcf5\uc0ac"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"aws s3 cp samplesheet_2.0_full.csv s3://$/nfcore-scrnaseq/samplesheet_2.0_full.csv\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\uc785\ub825 json \ub9cc\ub4e4\uae30 (\uc704 sample sheet\uacbd\ub85c\uac00 \uc544\ub798 \ub0b4\uc6a9\uc911 input\uc5d0 \uac12\uc73c\ub85c \ub4e4\uc5b4\uac00\uac8c\ub428)"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'cat  input_full.json\n/nfcore-scrnaseq/samplesheet_2.0_full.csv",\n        "protocol": "10XV2",\n        "aligner": "star",\n        "fasta": "s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/GRCm38.p6.genome.chr19.fa",\n        "gtf": "s3://aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/gencode.vM19.annotation.chr19.gtf",\n        "skip_emptydrops": true\n}\nEOF\n'})}),"\n",(0,r.jsx)(s.p,{children:"[Policy \uc900\ube44]"}),"\n",(0,r.jsx)(s.h5,{id:"prepare-iam-service-role-to-run-aws-healthomics-workflow",children:"Prepare IAM service role to run AWS HealthOmics workflow"}),"\n",(0,r.jsx)(s.p,{children:"your-bucket-name, your-account-id, your-region\uc744 \ubaa8\ub450 \ubcf8\uc778 \ud658\uacbd\uc5d0 \ub9de\uac8c \uc218\uc815\ud558\uc5ec \uc0ac\uc6a9\ud558\uc138\uc694."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"omics_workflow_policy.json"})," \ub9cc\ub4e4\uae30"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'\ncat  omics_workflow_policy.json\n/*",\n                "arn:aws:s3aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/*"\n            ]\n        },\n        ",\n                "arn:aws:s3aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0",\n                "arn:aws:s3aws-genomics-static-$/workflow_migration_workshop/nfcore-scrnaseq-v2.3.0/*"\n            ]\n        },\n        /*"\n            ]\n        },\n        :$:log-group:/aws/omics/WorkflowLog:log-stream:*"\n            ]\n        },\n        :$:log-group:/aws/omics/WorkflowLog:*"\n            ]\n        },\n        :$:repository/*"\n            ]\n        }\n    ]\n}\nEOF\n\necho "omics_workflow_policy.json \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"trust_policy.json"})," \ub9cc\ub4e4\uae30"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'cat  trust_policy.json\n,\n            "Action": "sts:AssumeRole",\n            "Condition": "\n                },\n                "ArnLike": :$:run/*"\n                }\n            }\n        }\n    ]\n}\nEOF\n\necho "trust_policy.json \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."\n'})}),"\n",(0,r.jsx)(s.h4,{id:"iam-role-\uc0dd\uc131",children:"IAM Role \uc0dd\uc131"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"aws iam create-role --role-name $ --assume-role-policy-document file://trust_policy.json\n"})}),"\n",(0,r.jsx)(s.p,{children:"Policy document \uc0dd\uc131"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"aws iam put-role-policy --role-name $ --policy-name OmicsWorkflowV1 --policy-document file://omics_workflow_policy.json\n"})}),"\n",(0,r.jsx)(s.h4,{id:"\uc6cc\ud06c\ud50c\ub85c\uc6b0-\uc2e4\ud589",children:"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc2e4\ud589"}),"\n",(0,r.jsxs)(s.p,{children:["\uc791\uc740 \uc0d8\ud50c\uc758 \uc608\uc81c\ub294 ",(0,r.jsx)(s.code,{children:"input.json"}),", \ud070 \uc0d8\ud50c\uc758 \uc608\uc81c\ub294 ",(0,r.jsx)(s.code,{children:"input_full.json"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"aws omics start-run \\\n  --name scrnaseq_workshop_test_run_1 \\\n  --role-arn arn:aws:iam::$:role/$\\\n  --workflow-id $ \\\n  --parameters file://input.json \\\n  --output-uri s3://$/output/\n"})})]})}function h(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3912(e,s,n){n.d(s,{A:()=>o});const o=n.p+"assets/images/screenshot-2025-04-15-at-3-52-46-pm-14c7d330669f6aef6c3d05c6fba4c993.png"},4626(e,s,n){n.d(s,{A:()=>o});const o=n.p+"assets/images/screenshot-2025-04-18-at-4-47-02-pm-790e991d9ac280099d607439748817df.png"},6314(e,s,n){n.d(s,{A:()=>o});const o=n.p+"assets/images/screenshot-2024-08-20-at-3-38-18-pm-a7d555b1eb9b4d702a4c58c43b37253a.png"},8453(e,s,n){n.d(s,{R:()=>i,x:()=>a});var o=n(6540);const r={},c=o.createContext(r);function i(e){const s=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(c.Provider,{value:s},e.children)}}}]);